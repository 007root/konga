<div class="col-md-12 bg-light-grey padding margin-bottom">
    <h4>
        <i class="mdi mdi-chart-bar"></i>
        Metrics
    </h4>
    <p class="help-block no-margin-bottom">
        Integrate with <a href="https://github.com/firehol/netdata" target="_blank">netdata</a>
        and monitor your API in real-time.
    </p>

</div>

<div class="row">
    <div class="col-md-12" ng-if="initializing">
        <konga-loader message="Initializing..."></konga-loader>
    </div>
    <div class="col-md-12" ng-if="!initializing">
        <div ng-if="error" class="alert alert-danger">
            <i class="mdi mdi-alert"></i>
            {{error}}
        </div>
        <div ng-if="!netdataApiUrl" class="alert alert-warning">
            <i class="mdi mdi-alert"></i>
            No <strong>netdata URL</strong> is set for this API or the current Kong Connection.
            <a href="javascript:void(0)" ng-click="editActiveNode()">Click here to set it up</a>.
        </div>
        <div ng-if="!statsd" class="alert alert-warning">
            <i class="mdi mdi-alert"></i>
            The <strong>statsd</strong> plugin must be enabled for this API.
        </div>
        <div ng-if="!apiCharts.length && statsd && netdataApiUrl" class="alert alert-warning">
            <i class="mdi mdi-alert"></i>
            No metrics where found for this API. Make sure you have configured netdata and the statsd plugin correctly.
        </div>


        <div ng-if="netdataApiUrl">
            <p>
                <strong class="margin-right">
                    Netdata URL :
                    <a href="{{netdataApiUrl}}" target="_blank">{{netdataApiUrl}}</a>
                </strong>
                <button class="btn btn-sm btn-link" ng-click="editNetdataUrl()">
                    <i class="mdi mdi-pencil-box"></i>
                    edit
                </button>
            </p>
        </div>

        <uib-tabset active="active">
            <uib-tab index="$index" heading="{{key.toUpperCase()}}" ng-repeat="(key, charts) in chartFamilies">
                <br>
                <div id="chart_{{chart.id}}"
                     ng-init="initRepeaterItem($index, chart)"
                     ng-repeat="chart in charts" style="width: 100%; height: 250px;"></div>

            </uib-tab>


        </uib-tabset>

        <!--<pre>{{metrics | json}}</pre>-->
        <!--<div google-chart-->
             <!--chart="chart"-->
             <!--url="netdataApiUrl"-->
             <!--ng-repeat="chart in apiCharts" style="width: 100%; height: 500px;"></div>-->
        <!--<div id="chart_{{chart.id}}"-->
             <!--ng-init="initRepeaterItem($index, chart)"-->
             <!--ng-repeat="chart in apiCharts" style="width: 100%; height: 250px;"></div>-->


        <!--<div google-chart chart="chart"-->
             <!--ng-repeat="chart in apiCharts"-->
             <!--style="height:500px; width:100%;"></div>-->
    </div>
</div>

